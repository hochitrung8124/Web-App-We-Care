# ************************************************************************************************
# Warning: YAML source code for Canvas Apps should only be used to review changes made within Power Apps Studio and for minor edits (Preview).
# Use the maker portal to create and edit your Power Apps.
# 
# The schema file for Canvas Apps is available at https://go.microsoft.com/fwlink/?linkid=2304907
# 
# For more information, visit https://go.microsoft.com/fwlink/?linkid=2292623
# ************************************************************************************************
Screens:
  PromitionDetail2:
    Properties:
      LoadingSpinnerColor: =RGBA(56, 96, 178, 1)
    Children:
      - Container4_3:
          Control: GroupContainer@1.4.0
          Variant: ManualLayout
          Properties:
            BorderColor: =RGBA(219, 219, 219, 1)
            Fill: =RGBA(4, 161, 179, 1)
            Height: =121
            Width: =766
          Children:
            - Label8_1:
                Control: Label@2.5.1
                Properties:
                  Align: =Align.Center
                  BorderColor: =RGBA(77, 77, 77, 1)
                  Color: =RGBA(255, 255, 255, 1)
                  Fill: =RGBA(4, 161, 179, 1)
                  Font: =Font.'Open Sans'
                  FontWeight: =FontWeight.Bold
                  Height: =111
                  Size: =30
                  Text: ="Promotion Detail"
                  Width: =765
                  X: =1
                  Y: =10
            - Icon2:
                Control: Classic/Icon@2.5.0
                Properties:
                  BorderColor: =RGBA(77, 77, 77, 1)
                  Color: =RGBA(255, 255, 255, 1)
                  Fill: =RGBA(4, 161, 179, 1)
                  Height: =118
                  Icon: =Icon.ArrowLeft
                  OnSelect: |-
                    =
                    Set(
                        varShowPDF, false
                    );
                    Back();
                  Width: =60
                  X: =17
                  Y: =3
      - HtmlText2:
          Control: HtmlViewer@2.1.0
          Properties:
            Fill: =RGBA(219, 219, 219, 1)
            Font: =Font.'Open Sans'
            Height: =534
            HtmlText: |
              ="<div style='
                width:100%;
                font-family:Segoe UI, Arial;
                font-size:16px;
                color:#1a1a1a;
                border:1px solid #cce4ff;
                border-radius:10px;
                padding:12px 18px 12px 14px;
                background-color:#f9fcff;
                box-shadow:0px 2px 4px rgba(0,0,0,0.04);
                line-height:1.5;
                overflow-x:hidden;
                overflow-y:hidden;
                box-sizing:border-box;
              '>

                <!-- Poster -->
                " & If(
                    !IsBlank(SelectedPromotion.'Url Image'),
                    "<div style='text-align:center; margin-bottom:12px;'>
                       <img src='" & SelectedPromotion.'Url Image' & "' 
                            style='max-width:100%; border-radius:10px; 
                                   box-shadow:0 1px 4px rgba(0,0,0,0.15); display:block; margin:auto;'/>
                     </div>",
                    ""
                  ) & "

                <!-- Promotion Name -->
                <div style='
                  font-weight:700;
                  color:#04a1b3;
                  font-size:19px;
                  margin-bottom:8px;
                  text-align:center;
                  word-wrap:break-word;
                '>
                  " & SelectedPromotion.Promotion & "
                </div>

                <!-- Time Range -->
                " & If(
                    !IsBlank(SelectedPromotion.'Start date') || !IsBlank(SelectedPromotion.'End date'),
                    "<div style='margin-bottom:10px;'>
                      <b>üïí Th·ªùi gian √°p d·ª•ng:</b> " &
                        If(!IsBlank(SelectedPromotion.'Start date'),
                           Text(SelectedPromotion.'Start date', "dd/mm/yyyy"),
                           ""
                        ) &
                        If(!IsBlank(SelectedPromotion.'End date'),
                           " - " & Text(SelectedPromotion.'End date', "dd/mm/yyyy"),
                           " - ƒê·∫øn khi c√≥ th√¥ng b√°o m·ªõi"
                        ) &
                    "</div>",
                    ""
                  ) & "

                <!-- Payment Conditions -->
                " & If(
                    !IsBlank(SelectedPromotion.'ƒêi·ªÅu kho·∫£n thanh to√°n √°p d·ª•ng'),
                    "<div style='margin-bottom:10px; display:flex; align-items:center;'>
                      <span style='font-size:16px; margin-right:4px;'>üí≥</span>
                      <span><b>ƒêi·ªÅu kho·∫£n thanh to√°n √°p d·ª•ng:</b> " & 
                      Concat(SelectedPromotion.'ƒêi·ªÅu kho·∫£n thanh to√°n √°p d·ª•ng', Value, ", ") &
                      "</span>
                    </div>",
                    ""
                  ) & "

                <!-- Description -->
                " & If(
                    !IsBlank(SelectedPromotion.Details),
                    "<div style='margin-bottom:10px;'>
                      <b>üìù M√¥ t·∫£:</b><br/>" &
                      SelectedPromotion.Details &
                    "</div>",
                    ""
                  ) & "
              </div>"
            OnSelect: |-
              =Set(
                  varShowPDF, true
              );
            Width: =766
            Y: =121
      - PdfViewer1_1:
          Control: PDFViewer@2.5.0
          Properties:
            DisplayMode: =DisplayMode.View
            Document: =SelectedPromotion.'File b√°o gi√° promotion'.Value
            Height: =701
            Visible: |+
              =varShowPDF1 &&
              With(
                {
                  u_text: SelectedPromotion.'File b√°o gi√° promotion'.Value,
                  u_rec: SelectedPromotion.'File b√°o gi√° promotion'
                },
                // N·∫øu .Value t·ªìn t·∫°i v√† k·∫øt th√∫c b·∫±ng .pdf
                (
                  !IsBlank(u_text) &&
                  EndsWith(SelectedPromotion.'File b√°o gi√° promotion'.FileName,".pdf")
                )
                ||
                // N·∫øu field l√† table/record v√† First(...).Name t·ªìn t·∫°i v√† k·∫øt th√∫c b·∫±ng .pdf
                (
                  !IsBlank(u_rec) &&
                  EndsWith(SelectedPromotion.'File b√°o gi√° promotion'.FileName,".pdf")
                )
                ||
                // N·∫øu field l√† table/record v√† First(...).Value t·ªìn t·∫°i v√† k·∫øt th√∫c b·∫±ng .pdf
                (
                  !IsBlank(u_rec) &&
                  EndsWith(SelectedPromotion.'File b√°o gi√° promotion'.FileName,".pdf")
                )
              )
            Width: =766
            Y: =665
      - Image4:
          Control: Image@2.2.3
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Height: =528
            Image: =SelectedPromotion.'File b√°o gi√° promotion'.Value
            Visible: |+
              =varShowPDF1 &&
              With(
                {
                  u_text: SelectedPromotion.'File b√°o gi√° promotion'.Value,
                  u_rec: SelectedPromotion.'File b√°o gi√° promotion'
                },
                // N·∫øu .Value t·ªìn t·∫°i v√† k·∫øt th√∫c b·∫±ng .pdf
                (
                  !IsBlank(u_text) &&
                  EndsWith(SelectedPromotion.'File b√°o gi√° promotion'.FileName,".png")
                )
                ||
                // N·∫øu field l√† table/record v√† First(...).Name t·ªìn t·∫°i v√† k·∫øt th√∫c b·∫±ng .pdf
                (
                  !IsBlank(u_rec) &&
                  EndsWith(SelectedPromotion.'File b√°o gi√° promotion'.FileName,".png")
                )
                ||
                // N·∫øu field l√† table/record v√† First(...).Value t·ªìn t·∫°i v√† k·∫øt th√∫c b·∫±ng .pdf
                (
                  !IsBlank(u_rec) &&
                  EndsWith(SelectedPromotion.'File b√°o gi√° promotion'.FileName,".png")
                )
              )
            Width: =766
            Y: =665
