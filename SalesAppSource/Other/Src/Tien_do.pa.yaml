# ************************************************************************************************
# Warning: YAML source code for Canvas Apps should only be used to review changes made within Power Apps Studio and for minor edits (Preview).
# Use the maker portal to create and edit your Power Apps.
# 
# The schema file for Canvas Apps is available at https://go.microsoft.com/fwlink/?linkid=2304907
# 
# For more information, visit https://go.microsoft.com/fwlink/?linkid=2292623
# ************************************************************************************************
Screens:
  Tien_do:
    Properties:
      Fill: =RGBA(219, 219, 219, 1)
      LoadingSpinnerColor: =RGBA(56, 96, 178, 1)
      OnVisible: |-
        = If(
                check_role_leader_sales Or checkrole_saleleader_online Or check_role_sup,
                // Gi√°m s√°t v√πng KDBL => l·∫•y to√†n b·ªô data
                ClearCollect(
                    List_DH,
                    Sort(
                        Filter(
                            Sale_Orders,
                            Status = 'Status (Sale_Orders)'.Active,
                            'Tr·∫°ng th√°i giao nh·∫≠n 1' <> 'tr·∫°ng th√°i giao nh·∫≠n sale'.'ƒê√£ giao',
                            'Created On' >= DateAdd(
                                Today(),
                                -30,
                                TimeUnit.Days
                            )
                        ),
                        'Created On',
                        SortOrder.Descending
                    )
                ),
                If(
                    !IsBlank(Trim(txt_SearchDH.Text)),
                    // C√≥ search => l·∫•y 30 ng√†y g·∫ßn nh·∫•t + filter search
                    ClearCollect(
                        List_DH,
                        Sort(
                            Filter(
                                Sale_Orders,
                                Status = 'Status (Sale_Orders)'.Active,
                                'Tr·∫°ng th√°i giao nh·∫≠n 1' <> 'tr·∫°ng th√°i giao nh·∫≠n sale'.'ƒê√£ giao',
                                //('Mail sale' = mail_sale Or 'Supervisor - mail' = mail_sale),
                                'Mail nh√¢n vi√™n sales' = mail_sale,
                                'Created On' >= DateAdd(
                                    Today(),
                                    -30,
                                    TimeUnit.Days
                                ),
                                txt_SearchDH.Text in 'Kh√°ch h√†ng text'
                            ),
                            'Created On',
                            SortOrder.Descending
                        )
                    ),
                    // Kh√¥ng search => l·∫•y 10 record trong 2 ng√†y g·∫ßn nh·∫•t
                    ClearCollect(
                        List_DH,
                        FirstN(
                            Sort(
                                Filter(
                                    Sale_Orders,
                                    Status = 'Status (Sale_Orders)'.Active,
                                    'Tr·∫°ng th√°i giao nh·∫≠n 1' <> 'tr·∫°ng th√°i giao nh·∫≠n sale'.'ƒê√£ giao',
                                    'Mail nh√¢n vi√™n sales' = mail_sale,
                                    'Created On' >= DateAdd(
                                        Today(),
                                        -30,
                                        TimeUnit.Days
                                    )
                                ),
                                'Created On',
                                SortOrder.Descending
                            ),
                            10
                        )
                    )
                )
            )
    Children:
      - Container:
          Control: GroupContainer@1.4.0
          Variant: ManualLayout
          Properties:
            DropShadow: =DropShadow.Semibold
            Fill: =RGBA(4, 161, 179, 1)
            Height: =txt_SearchDH.Y + txt_SearchDH.Height + 20
            Width: =Parent.Width
          Children:
            - txt_SearchDH:
                Control: Classic/TextInput@2.3.2
                Properties:
                  Align: =Align.Center
                  BorderColor: =RGBA(0, 0, 0, 0)
                  BorderThickness: =0
                  Default: =
                  DelayOutput: =true
                  Font: =Font.Arial
                  Height: =60
                  HintText: =If(Gallery6_1.Selected.Value = "V·∫≠n t·∫£i", "Kh√°ch h√†ng", "Nh√¢n vi√™n ph·ª• tr√°ch")
                  HoverBorderColor: =RGBA(0, 0, 0, 0)
                  HoverFill: =RGBA(186, 202, 226, 1)
                  OnChange: "=Switch(\n    Gallery6_1.Selected.Value,\n    \"V·∫≠n t·∫£i\",\n    ClearCollect(\n        List_VT,\n        Sort(\n            Filter(\n                'V·∫≠n t·∫£i',\n                Status = 'Status (V·∫≠n t·∫£i)'.Active,\n                'Mail sale' = mail_sale Or 'Supervisor - mail' = mail_sale,\n                'Created On' >= DateAdd(\n                    Today(),\n                    -30,\n                    TimeUnit.Days\n                ),\n                txt_SearchDH.Text in 'Kh√°ch h√†ng text'\n            ),\n            'Created On',\n            SortOrder.Descending\n        )\n    )\n    \n)"
                  OnSelect: =
                  PressedBorderColor: =
                  RadiusBottomLeft: =30
                  RadiusBottomRight: =30
                  RadiusTopLeft: =30
                  RadiusTopRight: =30
                  Size: =24
                  Width: =Parent.Width - 160
                  X: =80
                  Y: =Label2.Y + Label2.Height
            - Icon1:
                Control: Classic/Icon@2.5.0
                Properties:
                  BorderColor: =RGBA(0, 18, 107, 1)
                  Color: =RGBA(77, 77, 77, 1)
                  Height: =50
                  Icon: =Icon.Search
                  OnSelect: |
                    =ClearCollect(
                        List_VT,
                        Sort(
                            Filter(
                                'V·∫≠n t·∫£i',
                                Status = 'Status (V·∫≠n t·∫£i)'.Active,
                                'Mail sale' = mail_sale Or 'Supervisor - mail' = mail_sale,
                                'Created On' >= DateAdd(
                                    Today(),
                                    -30,
                                    TimeUnit.Days
                                ),
                                txt_SearchDH.Text in 'Kh√°ch h√†ng text'
                            ),
                            'Created On',
                            SortOrder.Descending
                        )
                    );
                  Width: =50
                  X: =628
                  Y: =70
            - Label2:
                Control: Label@2.5.1
                Properties:
                  Align: =Align.Center
                  BorderColor: =RGBA(0, 18, 107, 1)
                  Color: =RGBA(255, 255, 255, 1)
                  Font: =Font.Arial
                  FontWeight: =FontWeight.Bold
                  Height: =70
                  PaddingBottom: =0
                  PaddingLeft: =0
                  PaddingRight: =0
                  PaddingTop: =0
                  Size: =28
                  Text: ="Ti·∫øn ƒë·ªô "
                  Width: =Parent.Width
            - Icon6:
                Control: Classic/Icon@2.5.0
                Properties:
                  BorderColor: =RGBA(0, 18, 107, 1)
                  Color: =RGBA(255, 255, 255, 1)
                  Height: =60
                  Icon: =Icon.ArrowLeft
                  OnSelect: =Back()
                  Width: =60
                  X: =20
                  Y: =10
      - Gallery6_1:
          Control: Gallery@2.15.0
          Variant: Vertical
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Height: =80
            Items: =["ƒê∆°n h√†ng","V·∫≠n t·∫£i"]
            OnSelect: |-
              =Switch(
                  Gallery6_1.Selected.Value,
                  //====================================
                  "ƒê∆°n h√†ng",
                  If(
                      check_role_leader_sales Or checkrole_saleleader_online Or check_role_sup,
                      // Gi√°m s√°t v√πng KDBL => l·∫•y to√†n b·ªô data
                      ClearCollect(
                          List_DH,
                          Sort(
                              Filter(
                                  Sale_Orders,
                                  Status = 'Status (Sale_Orders)'.Active,
                                  'Tr·∫°ng th√°i giao nh·∫≠n 1' <> 'tr·∫°ng th√°i giao nh·∫≠n sale'.'ƒê√£ giao',
                                  'Created On' >= DateAdd(
                                      Today(),
                                      -30,
                                      TimeUnit.Days
                                  )
                              ),
                              'Created On',
                              SortOrder.Descending
                          )
                      ),
                      If(
                          !IsBlank(Trim(txt_SearchDH.Text)),
                          // C√≥ search => l·∫•y 30 ng√†y g·∫ßn nh·∫•t + filter search
                          ClearCollect(
                              List_DH,
                              Sort(
                                  Filter(
                                      Sale_Orders,
                                      Status = 'Status (Sale_Orders)'.Active,
                                      'Tr·∫°ng th√°i giao nh·∫≠n 1' <> 'tr·∫°ng th√°i giao nh·∫≠n sale'.'ƒê√£ giao',
                                      //('Mail sale' = mail_sale Or 'Supervisor - mail' = mail_sale),
                                      'Mail nh√¢n vi√™n sales' = mail_sale,
                                      'Created On' >= DateAdd(
                                          Today(),
                                          -30,
                                          TimeUnit.Days
                                      ),
                                      txt_SearchDH.Text in 'Kh√°ch h√†ng text'
                                  ),
                                  'Created On',
                                  SortOrder.Descending
                              )
                          ),
                          // Kh√¥ng search => l·∫•y 10 record trong 2 ng√†y g·∫ßn nh·∫•t
                          ClearCollect(
                              List_DH,
                              FirstN(
                                  Sort(
                                      Filter(
                                          Sale_Orders,
                                          Status = 'Status (Sale_Orders)'.Active,
                                          'Tr·∫°ng th√°i giao nh·∫≠n 1' <> 'tr·∫°ng th√°i giao nh·∫≠n sale'.'ƒê√£ giao',
                                          'Mail nh√¢n vi√™n sales' = mail_sale,
                                          'Created On' >= DateAdd(
                                              Today(),
                                              -30,
                                              TimeUnit.Days
                                          )
                                      ),
                                      'Created On',
                                      SortOrder.Descending
                                  ),
                                  10
                              )
                          )
                      )
                  ),
                  //====================================
                  "V·∫≠n t·∫£i",
                  If(
                      check_role_leader_sales Or checkrole_saleleader_online Or check_role_sup,
                      // Gi√°m s√°t v√πng KDBL => l·∫•y to√†n b·ªô data
                      ClearCollect(
                          List_VT,
                          Sort(
                              Filter(
                                  'V·∫≠n t·∫£i',
                                  Status = 'Status (V·∫≠n t·∫£i)'.Active
                              ),
                              'Created On',
                              SortOrder.Descending
                          )
                      ),
                      If(
                          !IsBlank(Trim(txt_SearchDH.Text)),
                          ClearCollect(
                              List_VT,
                              Sort(
                                  Filter(
                                      'V·∫≠n t·∫£i',
                                      Status = 'Status (V·∫≠n t·∫£i)'.Active,
                                      ('Mail sale' = mail_sale Or 'Supervisor - mail' = mail_sale),
                                      'Created On' >= DateAdd(
                                          Today(),
                                          -30,
                                          TimeUnit.Days
                                      ),
                                      txt_SearchDH.Text in 'Kh√°ch h√†ng text'
                                  ),
                                  'Created On',
                                  SortOrder.Descending
                              )
                          ),
                          ClearCollect(
                              List_VT,
                              FirstN(
                                  Sort(
                                      Filter(
                                          'V·∫≠n t·∫£i',
                                          Status = 'Status (V·∫≠n t·∫£i)'.Active,
                                          ('Mail sale' = mail_sale Or 'Supervisor - mail' = mail_sale),
                                          'Created On' >= DateAdd(
                                              Today(),
                                              -2,
                                              TimeUnit.Days
                                          )
                                      ),
                                      'Created On',
                                      SortOrder.Descending
                                  ),
                                  20
                              )
                          )
                      )
                  )
              )
            ShowScrollbar: =false
            TemplatePadding: =20
            TemplateSize: =50
            Width: =Parent.Width
            WrapCount: =2
            Y: =Container.Y + Container.Height
          Children:
            - Button9_1:
                Control: Classic/Button@2.2.0
                Properties:
                  BorderColor: =RGBA(77, 77, 77, 1)
                  BorderThickness: =1
                  Color: =If(ThisItem.IsSelected, RGBA(255, 255, 255, 1), RGBA(4, 161, 179, 1))
                  DisabledBorderColor: =RGBA(166, 166, 166, 1)
                  Fill: =If(ThisItem.IsSelected,RGBA(4, 161, 179, 1), RGBA(255, 255, 255, 1))
                  Font: =Font.Arial
                  Height: =Parent.TemplateHeight
                  HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                  HoverColor: =RGBA(255, 255, 255, 1)
                  HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                  OnSelect: =Select(Parent)
                  PaddingBottom: =0
                  PaddingLeft: =0
                  PaddingRight: =0
                  PaddingTop: =0
                  PressedBorderColor: =Self.Fill
                  PressedColor: =Self.Fill
                  PressedFill: =Self.Color
                  RadiusBottomLeft: =0
                  RadiusBottomRight: =0
                  RadiusTopLeft: =0
                  RadiusTopRight: =0
                  Size: =20
                  Text: =ThisItem.Value
                  Width: =Parent.TemplateWidth
      - Gallery_VT:
          Control: Gallery@2.15.0
          Variant: Vertical
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Fill: =RGBA(219, 219, 219, 1)
            Height: =1136
            Items: |-
              =Search(
                  List_VT,
                  txt_SearchDH.Text,
                  'Kh√°ch h√†ng text','M√£ phi·∫øu xu·∫•t'
              )
            OnSelect: |
              =UpdateContext({Visible_tiendo: true});
              ClearCollect(
                  chitiet_donhang,
                  Filter(
                      'Transaction Sales',
                      'M√£ phi·∫øu xu·∫•t' = Gallery_VT.Selected.'M√£ phi·∫øu xu·∫•t',
                      Status = 'Status (Transaction Sales)'.Active
                  )
              );
            ShowScrollbar: =false
            TemplatePadding: =20
            TemplateSize: =250
            Visible: =If(Gallery6_1.Selected.Value = "V·∫≠n t·∫£i" , true, false)
            Width: =Parent.Width - 10
            X: =5
            Y: =230
          Children:
            - Button1_8:
                Control: Classic/Button@2.2.0
                Properties:
                  BorderColor: =ColorFade(Self.Fill, -15%)
                  BorderThickness: =0
                  Color: =RGBA(255, 255, 255, 1)
                  DisabledBorderColor: =RGBA(166, 166, 166, 1)
                  Fill: =RGBA(255, 255, 255, 1)
                  Font: =Font.'Open Sans'
                  Height: =Parent.TemplateHeight
                  HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                  HoverColor: =RGBA(255, 255, 255, 1)
                  HoverFill: =
                  OnSelect: =Select(Parent)
                  PressedBorderColor: =Self.Fill
                  PressedColor: =Self.Fill
                  PressedFill: =
                  RadiusBottomLeft: =20
                  RadiusBottomRight: =20
                  RadiusTopLeft: =20
                  RadiusTopRight: =20
                  Size: =24
                  Text: =""
                  Width: =Parent.TemplateWidth
            - Label1_19:
                Control: Label@2.5.1
                Properties:
                  AutoHeight: =true
                  BorderColor: =RGBA(0, 18, 107, 1)
                  Color: =RGBA(77, 77, 77, 1)
                  Font: =Font.Arial
                  Height: =100
                  OnSelect: =Select(Parent)
                  PaddingLeft: =20
                  Size: =24
                  Text: =ThisItem.'M√£ phi·∫øu xu·∫•t'
                  Width: =Gallery_VT.TemplateWidth
                  Y: =Label1_20.Y + Label1_20.Height
            - Label1_20:
                Control: Label@2.5.1
                Properties:
                  BorderColor: =RGBA(0, 18, 107, 1)
                  Color: =RGBA(4, 161, 179, 1)
                  Font: =Font.Arial
                  FontWeight: =FontWeight.Bold
                  Height: =70
                  OnSelect: =Select(Parent)
                  PaddingLeft: =20
                  Size: =24
                  Text: =ThisItem.'Kh√°ch h√†ng text'
                  Width: =Gallery_VT.TemplateWidth
            - SL_don_3:
                Control: Label@2.5.1
                Properties:
                  BorderColor: =RGBA(0, 18, 107, 1)
                  Color: =RGBA(77, 77, 77, 1)
                  Font: =Font.Arial
                  OnSelect: =Select(Parent)
                  PaddingBottom: =0
                  PaddingLeft: =20
                  PaddingRight: =0
                  PaddingTop: =0
                  Size: =20
                  Text: |-
                    ="SƒêT ch√†nh xe: "&ThisItem.'S·ªë ƒëi·ªán tho·∫°i'
                  Width: =Parent.TemplateWidth
                  Y: =210
            - Label1_21:
                Control: Label@2.5.1
                Properties:
                  Align: =Align.Right
                  BorderColor: =RGBA(0, 18, 107, 1)
                  Color: =RGBA(77, 77, 77, 1)
                  Fill: =RGBA(255, 255, 255, 1)
                  Font: =Font.Arial
                  OnSelect: =Select(Parent)
                  PaddingLeft: =0
                  PaddingRight: =20
                  Size: =20
                  Text: |-
                    ="Ng√†y xu·∫•t kho: "& Text(ThisItem.'Created On',"dd/mm/yyyy")
                  Width: =434
                  X: =284
                  Y: =Label1_22.Y
            - Label1_22:
                Control: Label@2.5.1
                Properties:
                  BorderColor: =RGBA(0, 18, 107, 1)
                  Color: =RGBA(77, 77, 77, 1)
                  Font: =Font.Arial
                  OnSelect: =Select(Parent)
                  PaddingLeft: =20
                  PaddingRight: =0
                  Size: =20
                  Text: |-
                    ="ƒêVVC: "&ThisItem.'Ch√†nh xe text'
                  Width: =SL_don_3.Width
                  Y: =Label1_19.Y + Label1_19.Height
            - SL_con_lai_3:
                Control: Label@2.5.1
                Properties:
                  AutoHeight: =true
                  BorderColor: =RGBA(0, 18, 107, 1)
                  Color: =RGBA(77, 77, 77, 1)
                  Font: =Font.Arial
                  OnSelect: =Select(Parent)
                  PaddingLeft: =20
                  Size: =20
                  Text: |
                    ="TTVC: " & 
                    If(
                        ThisItem.'Tr·∫°ng th√°i' = 'Tr·∫°ng th√°i (V·∫≠n t·∫£i)'.'H√†ng trong kho', 
                        "H√†ng trong kho", 
                        If(
                            ThisItem.'Tr·∫°ng th√°i' = 'Tr·∫°ng th√°i (V·∫≠n t·∫£i)'.'ƒê√£ g·ª≠i' && ThisItem.'Nh·∫≠n h√†ng' = 'Nh·∫≠n h√†ng (V·∫≠n t·∫£i)'.'Ch∆∞a nh·∫≠n', 
                            "ƒê√£ xu·∫•t kho, ƒëang g·ª≠i ch√†nh", 
                            If(
                                ThisItem.'Tr·∫°ng th√°i' = 'Tr·∫°ng th√°i (V·∫≠n t·∫£i)'.'ƒê√£ g·ª≠i' && ThisItem.'Nh·∫≠n h√†ng' = 'Nh·∫≠n h√†ng (V·∫≠n t·∫£i)'.'ƒê√£ nh·∫≠n', 
                                "Ch√†nh ƒë√£ nh·∫≠n, ch√†nh ƒëang giao h√†ng", 
                                "Tr·∫°ng th√°i kh√¥ng x√°c ƒë·ªãnh"
                            )
                        )
                    )
                  Width: =Parent.TemplateWidth
                  Y: =Label1_22.Height + Label1_22.Y
      - Gallery_DH:
          Control: Gallery@2.15.0
          Variant: Vertical
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Fill: =RGBA(219, 219, 219, 1)
            Height: =1136
            Items: |-
              =Search(
                  List_DH,
                  txt_SearchDH.Text,
                  'Kh√°ch h√†ng text'
              )
            OnSelect: |
              =UpdateContext({Visible_tiendo_DH: true});
              UpdateContext({Visible_tiendo: false});
              ClearCollect(
                  chitiet_donhang_DH,
                  Filter(
                      'Sale Order Details',
                      'M√£ ƒë∆°n h√†ng'.Id = Gallery_DH.Selected.Id,
                      Status = 'Status (Sale Order Details)'.Active
                  )
              );
            ShowScrollbar: =false
            TemplatePadding: =20
            TemplateSize: =250
            Visible: =If(Gallery6_1.Selected.Value = "ƒê∆°n h√†ng" , true, false)
            Width: =Parent.Width - 10
            Y: =230
          Children:
            - Button1_7:
                Control: Classic/Button@2.2.0
                Properties:
                  BorderColor: =ColorFade(Self.Fill, -15%)
                  BorderThickness: =0
                  Color: =RGBA(255, 255, 255, 1)
                  DisabledBorderColor: =RGBA(166, 166, 166, 1)
                  Fill: =RGBA(255, 255, 255, 1)
                  Font: =Font.'Open Sans'
                  Height: =260
                  HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                  HoverColor: =RGBA(255, 255, 255, 1)
                  HoverFill: =
                  OnSelect: =Select(Parent)
                  PressedBorderColor: =Self.Fill
                  PressedColor: =Self.Fill
                  PressedFill: =
                  RadiusBottomLeft: =20
                  RadiusBottomRight: =20
                  RadiusTopLeft: =20
                  RadiusTopRight: =20
                  Size: =24
                  Text: =""
                  Width: =Parent.TemplateWidth
            - HtmlText3:
                Control: HtmlViewer@2.1.0
                Properties:
                  Font: =Font.'Open Sans'
                  Height: =250
                  HtmlText: |+
                    ="<div style='
                      width:98%;
                      font-family:Segoe UI, Arial;
                      background:#f9f9f9;
                      border-radius:10px;
                      padding:10px 12px;
                      box-shadow:0 1.5px 3px rgba(0,0,0,0.1);
                      margin:auto;
                      color:#333;
                      font-size:14px;
                      line-height:1;
                      box-sizing:border-box;
                    '>

                      <!-- M√£ ƒë∆°n h√†ng -->
                      <div style='
                        font-size:16px;
                        font-weight:700;
                        color:#04A1B3;
                        margin-bottom:6px;
                        word-wrap:break-word;
                      '>
                        " & Substitute(ThisItem.'M√£ ƒê∆°n H√†ng', "&", "&amp;") & "
                      </div>

                      <!-- Kh√°ch h√†ng -->
                      <div style='margin-bottom:4px;'>
                        <b>üë§ Kh√°ch h√†ng:</b> " & Substitute(ThisItem.'Kh√°ch h√†ng text', "&", "&amp;") & "
                      </div>

                      <!-- Ng√†y t·∫°o ƒë∆°n & Sale -->
                      <div style='display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; margin-bottom:6px;'>
                        " &
                        If(!IsBlank(ThisItem.'Ng√†y t·∫°o ƒë∆°n h√†ng'),
                            "<span><b>üìÖ Ng√†y t·∫°o:</b> " & Text(ThisItem.'Ng√†y t·∫°o ƒë∆°n h√†ng', "dd/mm/yyyy") & "</span>",
                            ""
                        ) &
                        If(!IsBlank(ThisItem.'Nh√¢n vi√™n sales text'),
                            "<span><b>üíº Sale:</b> " & Substitute(ThisItem.'Nh√¢n vi√™n sales text', "&", "&amp;") & "</span>",
                            ""
                        ) &
                      "</div>" &

                      If(!IsBlank(ThisItem.'Tr·∫°ng th√°i giao nh·∫≠n 1 Text'),
                          "<div style='
                            font-size:14px;
                            font-weight:600;
                            margin-top:8px;
                            padding:6px 10px;
                            border-radius:6px;
                            background:" &
                              Switch(
                                  Lower(ThisItem.'Tr·∫°ng th√°i giao nh·∫≠n 1 Text'),
                                  "ch∆∞a giao", "#ffe6e6",        // ƒë·ªè nh·∫°t
                                  "giao d·ªü dang", "#fff2cc",     // v√†ng nh·∫°t
                                  "ƒë√£ giao", "#e6ffe6",          // xanh nh·∫°t
                                  "#f1f1f1"
                              ) &
                            "; display:flex; align-items:center; gap:6px;'>
                              " &
                              Switch(
                                  Lower(ThisItem.'Tr·∫°ng th√°i giao nh·∫≠n 1 Text'),
                                  "ch∆∞a giao", "üö´",
                                  "giao d·ªü dang", "‚öôÔ∏è",
                                  "ƒë√£ giao", "‚úÖ",
                                  "‚ÑπÔ∏è"
                              ) &
                              " <b>Tr·∫°ng th√°i:</b> " & ThisItem.'Tr·∫°ng th√°i giao nh·∫≠n 1 Text' & "
                          </div>",
                          ""
                      ) &

                    "</div>"
                  OnSelect: |+
                    =UpdateContext({Visible_tiendo_DH: true});
                    UpdateContext({Visible_tiendo: false});
                    ClearCollect(
                        chitiet_donhang_DH,
                        Filter(
                            'Sale Order Details',
                            'M√£ ƒë∆°n h√†ng'.Id = Gallery_DH.Selected.Id,
                            Status = 'Status (Sale Order Details)'.Active
                        )
                    );
                  Width: =718
      - Container_VT:
          Control: GroupContainer@1.4.0
          Variant: ManualLayout
          Properties:
            Fill: =RGBA(219, 219, 219, 1)
            Height: =1366
            Visible: =Visible_tiendo
            Width: =768
          Children:
            - Container_1:
                Control: GroupContainer@1.4.0
                Variant: ManualLayout
                Properties:
                  DropShadow: =DropShadow.Semibold
                  Fill: =RGBA(4, 161, 179, 1)
                  Height: =86
                  Width: =Parent.Width
                Children:
                  - Label2_3:
                      Control: Label@2.5.1
                      Properties:
                        Align: =Align.Center
                        BorderColor: =RGBA(0, 18, 107, 1)
                        Color: =RGBA(255, 255, 255, 1)
                        Font: =Font.Arial
                        FontWeight: =FontWeight.Bold
                        Height: =86
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =28
                        Text: =////Gallery_DH.Selected.'M√£ k·∫ø ho·∫°ch'
                        Width: =Parent.Width
                  - Icon6_1:
                      Control: Classic/Icon@2.5.0
                      Properties:
                        BorderColor: =RGBA(0, 18, 107, 1)
                        Color: =RGBA(255, 255, 255, 1)
                        Height: =60
                        Icon: =Icon.ArrowLeft
                        OnSelect: =UpdateContext({Visible_tiendo:false});
                        Width: =60
                        X: =21
                        Y: =13
            - Gallery_VT_1:
                Control: Gallery@2.15.0
                Variant: Vertical
                Properties:
                  BorderColor: =RGBA(0, 18, 107, 1)
                  Fill: =RGBA(219, 219, 219, 1)
                  Height: =1178
                  Items: =chitiet_donhang//Search(chitiet_donhang,txt_SearchDH_1.Text,'T√™n s·∫£n ph·∫©m text')
                  ShowScrollbar: =false
                  TemplatePadding: =10
                  TemplateSize: =97
                  Visible: =If(Gallery6_1.Selected.Value = "V·∫≠n t·∫£i", true, false)
                  Width: =768
                  Y: =86
                Children:
                  - Button1_6:
                      Control: Classic/Button@2.2.0
                      Properties:
                        BorderColor: =ColorFade(Self.Fill, -15%)
                        BorderThickness: =0
                        Color: =RGBA(255, 255, 255, 1)
                        DisabledBorderColor: =RGBA(166, 166, 166, 1)
                        Fill: =RGBA(255, 255, 255, 1)
                        Font: =Font.'Open Sans'
                        Height: =92
                        HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                        HoverColor: =RGBA(255, 255, 255, 1)
                        HoverFill: =
                        OnSelect: =Select(Parent)
                        PressedBorderColor: =Self.Fill
                        PressedColor: =Self.Fill
                        PressedFill: =
                        RadiusBottomLeft: =20
                        RadiusBottomRight: =20
                        RadiusTopLeft: =20
                        RadiusTopRight: =20
                        Size: =24
                        Text: =""
                        Width: =Parent.TemplateWidth
                  - Label_tensanpham:
                      Control: Label@2.5.1
                      Properties:
                        AutoHeight: =true
                        BorderColor: =RGBA(0, 18, 107, 1)
                        Font: =Font.Arial
                        FontWeight: =FontWeight.Bold
                        Height: =70
                        OnSelect: =Select(Parent)
                        PaddingLeft: =20
                        Size: =20
                        Text: =ThisItem.'T√™n s·∫£n ph·∫©m'
                        Width: =Gallery_VT_1.TemplateWidth
                  - Label_soluong:
                      Control: Label@2.5.1
                      Properties:
                        AutoHeight: =true
                        BorderColor: =RGBA(0, 18, 107, 1)
                        Color: =RGBA(77, 77, 77, 1)
                        Font: =Font.Arial
                        Height: =60
                        OnSelect: =Select(Parent)
                        PaddingLeft: =20
                        Size: =18
                        Text: |-
                          =ThisItem.'S·ªë l∆∞·ª£ng giao theo kho' & " " & ThisItem.'ƒê∆°n v·ªã theo kho' & " x " & Text(
                              ThisItem.'ƒê∆°n gi√°',
                              "#,###"
                          ) & " = " & Text(
                              ThisItem.'ƒê∆°n gi√°' * ThisItem.'S·ªë l∆∞·ª£ng giao theo kho',
                              "#,###"
                          )
                        Width: =Gallery_VT_1.TemplateWidth
                        Y: =Label_tensanpham.Height + Label_tensanpham.Y
                  - Label_quycach:
                      Control: Label@2.5.1
                      Properties:
                        Align: =Align.Right
                        AutoHeight: =true
                        BorderColor: =RGBA(0, 18, 107, 1)
                        Color: =RGBA(77, 77, 77, 1)
                        Font: =Font.Arial
                        Height: =60
                        OnSelect: =Select(Parent)
                        PaddingRight: =20
                        Size: =18
                        Text: |-
                          ="Quy c√°ch: "&ThisItem.'Quy c√°ch ƒë√≥ng g√≥i'
                        Width: =Gallery_VT_1.TemplateWidth
                        Y: =Label_tensanpham.Height + Label_tensanpham.Y
                  - Label_thanhtien:
                      Control: Label@2.5.1
                      Properties:
                        BorderColor: =RGBA(0, 18, 107, 1)
                        Font: =Font.'Open Sans'
                        OnSelect: =Select(Parent)
                        Text: =ThisItem.'ƒê∆°n gi√°' * ThisItem.'S·ªë l∆∞·ª£ng giao theo kho'
                        Visible: =false
                        Width: =74
                        X: =663
            - Container_tong:
                Control: GroupContainer@1.4.0
                Variant: ManualLayout
                Properties:
                  Fill: =RGBA(255, 255, 255, 1)
                  Height: =89
                  RadiusBottomLeft: =20
                  RadiusBottomRight: =20
                  RadiusTopLeft: =20
                  RadiusTopRight: =20
                  Width: =Gallery_VT_1.TemplateWidth
                  X: =10
                  Y: =1270
                Children:
                  - Label6:
                      Control: Label@2.5.1
                      Properties:
                        BorderColor: =RGBA(0, 18, 107, 1)
                        Font: =Font.Arial
                        Height: =Parent.Height
                        PaddingLeft: =20
                        Size: =20
                        Text: |-
                          ="T·ªïng ti·ªÅn: " & Text(Sum(Gallery_VT_1.AllItems,Value(Label_thanhtien.Text)),"#,###")
                        Width: =Parent.Width
      - Container1_DH:
          Control: GroupContainer@1.4.0
          Variant: ManualLayout
          Properties:
            Fill: =RGBA(219, 219, 219, 1)
            Height: =1366
            Visible: =Visible_tiendo_DH
            Width: =768
          Children:
            - Container_2:
                Control: GroupContainer@1.4.0
                Variant: ManualLayout
                Properties:
                  DropShadow: =DropShadow.Semibold
                  Fill: =RGBA(4, 161, 179, 1)
                  Height: =86
                  Width: =Parent.Width
                Children:
                  - Label2_4:
                      Control: Label@2.5.1
                      Properties:
                        Align: =Align.Center
                        BorderColor: =RGBA(0, 18, 107, 1)
                        Color: =RGBA(255, 255, 255, 1)
                        Font: =Font.Arial
                        FontWeight: =FontWeight.Bold
                        Height: =70
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =28
                        Text: ="Chi ti·∫øt ti·∫øn ƒë·ªô"
                        Width: =Parent.Width
                  - Icon6_2:
                      Control: Classic/Icon@2.5.0
                      Properties:
                        BorderColor: =RGBA(0, 18, 107, 1)
                        Color: =RGBA(255, 255, 255, 1)
                        Height: =60
                        Icon: =Icon.ArrowLeft
                        OnSelect: =UpdateContext({Visible_tiendo_DH:false});
                        Width: =60
                        X: =21
                        Y: =13
            - Gallery_VT_2:
                Control: Gallery@2.15.0
                Variant: Vertical
                Properties:
                  BorderColor: =RGBA(0, 18, 107, 1)
                  Fill: =RGBA(219, 219, 219, 1)
                  Height: =1258
                  Items: =chitiet_donhang_DH//Search(chitiet_donhang,txt_SearchDH_1.Text,'T√™n s·∫£n ph·∫©m text')
                  ShowScrollbar: =false
                  TemplatePadding: =15
                  TemplateSize: =220
                  Visible: =If(Gallery6_1.Selected.Value = "ƒê∆°n h√†ng", true, false)
                  Width: =768
                  Y: =108
                Children:
                  - Button1_9:
                      Control: Classic/Button@2.2.0
                      Properties:
                        BorderColor: =ColorFade(Self.Fill, -15%)
                        BorderThickness: =0
                        Color: =RGBA(255, 255, 255, 1)
                        DisabledBorderColor: =RGBA(166, 166, 166, 1)
                        Fill: =RGBA(255, 255, 255, 1)
                        Font: =Font.'Open Sans'
                        Height: =220
                        HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                        HoverColor: =RGBA(255, 255, 255, 1)
                        HoverFill: =
                        OnSelect: =Select(Parent)
                        PressedBorderColor: =Self.Fill
                        PressedColor: =Self.Fill
                        PressedFill: =
                        RadiusBottomLeft: =20
                        RadiusBottomRight: =20
                        RadiusTopLeft: =20
                        RadiusTopRight: =20
                        Size: =24
                        Text: =""
                        Width: =Parent.TemplateWidth
                  - HtmlText4:
                      Control: HtmlViewer@2.1.0
                      Properties:
                        Font: =Font.'Open Sans'
                        Height: =220
                        HtmlText: |+
                          ="<div style='
                            width:96%;
                            max-width:96%;
                            font-family:Segoe UI,Arial;
                            font-size:14px;
                            color:#1a1a1a;
                            border:1px solid #cce4ff;
                            border-radius:8px;
                            padding:6px 8px;
                            background-color:#f9fcff;
                            box-shadow:0 1px 3px rgba(0,0,0,0.05);
                            line-height:1.2;
                            box-sizing:border-box;
                            margin:auto;
                            overflow:hidden;
                            white-space:normal;
                            word-wrap:break-word;
                          '>

                            <!-- T√™n s·∫£n ph·∫©m -->
                            <div style='
                              font-weight:600;
                              color:#047a8b;
                              font-size:14px;
                              margin-bottom:2px;
                              word-wrap:break-word;
                            '>
                              <i>" & ThisItem.'T√™n s·∫£n ph·∫©m text' & "</i>
                            </div>

                            <!-- Ng√†y giao d·ª± ki·∫øn -->
                            " & If(
                              !IsBlank(ThisItem.'Ng√†y d·ª± ki·∫øn giao'),
                              "<div style='margin-bottom:2px;'>
                                <span style=""font-size:12px;"">üìÖ</span>
                                <span><b> Ng√†y giao d·ª± ki·∫øn:</b> " & Text(ThisItem.'Ng√†y d·ª± ki·∫øn giao',"dd/mm/yyyy") & "</span>
                              </div>",
                              ""
                            ) & "

                            <!-- S·ªë l∆∞·ª£ng -->
                            " & If(
                              !IsBlank(ThisItem.'S·ªë l∆∞·ª£ng'),
                              "<div style='margin-bottom:2px;'>
                                <span style=""font-size:12px;"">üì¶</span>
                                <span><b> S·ªë l∆∞·ª£ng:</b> " & ThisItem.'S·ªë l∆∞·ª£ng' & " " & ThisItem.'ƒê∆°n v·ªã ƒë∆°n h√†ng' & "</span>
                              </div>",
                              ""
                            ) & "

                            <!-- T·ªìn kho theo k·∫ø ho·∫°ch -->
                            " & If(
                              !IsBlank(ThisItem.'T·ªìn kho theo k·∫ø ho·∫°ch'),
                              "<div style='margin-bottom:2px;'>
                                <span style=""font-size:12px;"">üè≠</span>
                                <span><b> T·ªìn kho theo k·∫ø ho·∫°ch:</b> " & ThisItem.'T·ªìn kho theo k·∫ø ho·∫°ch' & " " & ThisItem.'ƒê∆°n v·ªã theo kho' & "</span>
                              </div>",
                              ""
                            ) & "

                            <!-- Tr·∫°ng th√°i giao nh·∫≠n -->
                            " & If(
                              !IsBlank(ThisItem.'Tr·∫°ng th√°i giao nh·∫≠n CAL'),
                              With(
                                {
                                  bgColor: Switch(
                                    ThisItem.'Tr·∫°ng th√°i giao nh·∫≠n CAL',
                                    "Ch∆∞a giao", "#fff3cd",     /* v√†ng nh·∫°t */
                                    "Giao d·ªü dang", "#cfe2ff",  /* xanh nh·∫°t */
                                    "ƒê√£ giao", "#d1e7dd",       /* xanh l√° nh·∫°t */
                                    "#f8f9fa"                   /* m·∫∑c ƒë·ªãnh */
                                  ),
                                  borderColor: Switch(
                                    ThisItem.'Tr·∫°ng th√°i giao nh·∫≠n CAL',
                                    "Ch∆∞a giao", "#ffc107",     /* v√†ng */
                                    "Giao d·ªü dang", "#0d6efd",  /* xanh d∆∞∆°ng */
                                    "ƒê√£ giao", "#198754",       /* xanh l√° */
                                    "#dee2e6"
                                  ),
                                  textColor: Switch(
                                    ThisItem.'Tr·∫°ng th√°i giao nh·∫≠n CAL',
                                    "Ch∆∞a giao", "#664d03",
                                    "Giao d·ªü dang", "#084298",
                                    "ƒê√£ giao", "#0f5132",
                                    "#333333"
                                  )
                                },
                                "<div style='
                                  margin-top:4px;
                                  font-weight:600;
                                  background-color:" & bgColor & ";
                                  border-left:3px solid " & borderColor & ";
                                  color:" & textColor & ";
                                  padding:4px 6px;
                                  border-radius:5px;
                                  overflow:hidden;
                                  white-space:normal;
                                '>
                                  ‚öôÔ∏è Tr·∫°ng Th√°i: " & ThisItem.'Tr·∫°ng th√°i giao nh·∫≠n CAL' & "
                                </div>"
                              ),
                              ""
                            ) & "

                          </div>"
                        OnSelect: =Select(Parent)
                        Width: =724
            - Container_tong_1:
                Control: GroupContainer@1.4.0
                Variant: ManualLayout
                Properties:
                  Fill: =RGBA(255, 255, 255, 1)
                  Height: =89
                  RadiusBottomLeft: =20
                  RadiusBottomRight: =20
                  RadiusTopLeft: =20
                  RadiusTopRight: =20
                  Visible: =Visible_tiendo
                  Width: =Gallery_VT_2.TemplateWidth
                  X: =10
                  Y: =1270
                Children:
                  - Label6_3:
                      Control: Label@2.5.1
                      Properties:
                        BorderColor: =RGBA(0, 18, 107, 1)
                        Font: =Font.Arial
                        Height: =Parent.Height
                        PaddingLeft: =20
                        Size: =20
                        Text: |-
                          ="T·ªïng ti·ªÅn: " & Text(Sum(Gallery_VT_2.AllItems,Value(Label_thanhtien.Text)),"#,###")
                        Visible: =Visible_tiendo
                        Width: =Parent.Width
            - Container1_3:
                Control: GroupContainer@1.4.0
                Variant: ManualLayout
                Properties:
                  Fill: =RGBA(219, 219, 219, 1)
                  Height: =1366
                  Visible: =Visible_tiendo
                  Width: =768
                Children:
                  - Container_4:
                      Control: GroupContainer@1.4.0
                      Variant: ManualLayout
                      Properties:
                        DropShadow: =DropShadow.Semibold
                        Fill: =RGBA(4, 161, 179, 1)
                        Height: =86
                        Width: =Parent.Width
                      Children:
                        - Label2_6:
                            Control: Label@2.5.1
                            Properties:
                              Align: =Align.Center
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Color: =RGBA(255, 255, 255, 1)
                              Font: =Font.Arial
                              FontWeight: =FontWeight.Bold
                              Height: =86
                              PaddingBottom: =0
                              PaddingLeft: =0
                              PaddingRight: =0
                              PaddingTop: =0
                              Size: =28
                              Text: =////Gallery_DH.Selected.'M√£ k·∫ø ho·∫°ch'
                              Width: =Parent.Width
                        - Icon6_3:
                            Control: Classic/Icon@2.5.0
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Color: =RGBA(255, 255, 255, 1)
                              Height: =60
                              Icon: =Icon.ArrowLeft
                              OnSelect: =UpdateContext({Visible_tiendo:false});
                              Width: =60
                              X: =21
                              Y: =13
                  - Gallery_VT_3:
                      Control: Gallery@2.15.0
                      Variant: Vertical
                      Properties:
                        BorderColor: =RGBA(0, 18, 107, 1)
                        Fill: =RGBA(219, 219, 219, 1)
                        Height: =1178
                        Items: =chitiet_donhang//Search(chitiet_donhang,txt_SearchDH_1.Text,'T√™n s·∫£n ph·∫©m text')
                        ShowScrollbar: =false
                        TemplatePadding: =10
                        TemplateSize: =97
                        Visible: =If(Gallery6_1.Selected.Value = "V·∫≠n t·∫£i", true, false)
                        Width: =768
                        Y: =86
                      Children:
                        - Button1_10:
                            Control: Classic/Button@2.2.0
                            Properties:
                              BorderColor: =ColorFade(Self.Fill, -15%)
                              BorderThickness: =0
                              Color: =RGBA(255, 255, 255, 1)
                              DisabledBorderColor: =RGBA(166, 166, 166, 1)
                              Fill: =RGBA(255, 255, 255, 1)
                              Font: =Font.'Open Sans'
                              Height: =92
                              HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                              HoverColor: =RGBA(255, 255, 255, 1)
                              HoverFill: =
                              OnSelect: =Select(Parent)
                              PressedBorderColor: =Self.Fill
                              PressedColor: =Self.Fill
                              PressedFill: =
                              RadiusBottomLeft: =20
                              RadiusBottomRight: =20
                              RadiusTopLeft: =20
                              RadiusTopRight: =20
                              Size: =24
                              Text: =""
                              Width: =Parent.TemplateWidth
                        - Label_tensanpham_2:
                            Control: Label@2.5.1
                            Properties:
                              AutoHeight: =true
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.Arial
                              FontWeight: =FontWeight.Bold
                              Height: =70
                              OnSelect: =Select(Parent)
                              PaddingLeft: =20
                              Size: =20
                              Text: =ThisItem.'T√™n s·∫£n ph·∫©m'
                              Width: =Gallery_VT_3.TemplateWidth
                        - Label_soluong_2:
                            Control: Label@2.5.1
                            Properties:
                              AutoHeight: =true
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Color: =RGBA(77, 77, 77, 1)
                              Font: =Font.Arial
                              Height: =60
                              OnSelect: =Select(Parent)
                              PaddingLeft: =20
                              Size: =18
                              Text: |-
                                =ThisItem.'S·ªë l∆∞·ª£ng giao theo kho' & " " & ThisItem.'ƒê∆°n v·ªã theo kho' & " x " & Text(
                                    ThisItem.'ƒê∆°n gi√°',
                                    "#,###"
                                ) & " = " & Text(
                                    ThisItem.'ƒê∆°n gi√°' * ThisItem.'S·ªë l∆∞·ª£ng giao theo kho',
                                    "#,###"
                                )
                              Width: =Gallery_VT_3.TemplateWidth
                              Y: =37
                        - Label_quycach_2:
                            Control: Label@2.5.1
                            Properties:
                              Align: =Align.Right
                              AutoHeight: =true
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Color: =RGBA(77, 77, 77, 1)
                              Font: =Font.Arial
                              Height: =60
                              OnSelect: =Select(Parent)
                              PaddingRight: =20
                              Size: =18
                              Text: |-
                                ="Quy c√°ch: "&ThisItem.'Quy c√°ch ƒë√≥ng g√≥i'
                              Width: =Gallery_VT_3.TemplateWidth
                              Y: =37
                        - Label_thanhtien_2:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.'Open Sans'
                              OnSelect: =Select(Parent)
                              Text: =ThisItem.'ƒê∆°n gi√°' * ThisItem.'S·ªë l∆∞·ª£ng giao theo kho'
                              Visible: =false
                              Width: =74
                              X: =663
                  - Container_tong_2:
                      Control: GroupContainer@1.4.0
                      Variant: ManualLayout
                      Properties:
                        Fill: =RGBA(255, 255, 255, 1)
                        Height: =89
                        RadiusBottomLeft: =20
                        RadiusBottomRight: =20
                        RadiusTopLeft: =20
                        RadiusTopRight: =20
                        Width: =Gallery_VT_3.TemplateWidth
                        X: =10
                        Y: =1270
                      Children:
                        - Label6_4:
                            Control: Label@2.5.1
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Font: =Font.Arial
                              Height: =Parent.Height
                              PaddingLeft: =20
                              Size: =20
                              Text: |-
                                =If(Visible_tiendo, "T·ªïng ti·ªÅn: " & Text(Sum(Gallery_VT_3.AllItems,Value(Label_thanhtien.Text)),"#,###"),"")
                              Width: =Parent.Width
      - lbl_SoDH_tre_1:
          Control: Label@2.5.1
          Properties:
            Align: =Align.Right
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =RGBA(77, 77, 77, 1)
            Font: =Font.Arial
            PaddingBottom: =0
            PaddingLeft: =20
            PaddingRight: =30
            PaddingTop: =0
            Size: =20
            Text: =CountRows(Filter(List_VT,'Nh·∫≠n h√†ng'='Nh·∫≠n h√†ng (V·∫≠n t·∫£i)'.'ƒê√£ nh·∫≠n'))&" ƒë∆°n ƒëang v·∫≠n chuy·ªÉn"
            Visible: =If(Gallery6_1.Selected.Value = "V·∫≠n t·∫£i" And Visible_tiendo = false, true, false)
            Width: =Parent.Width/2
            X: =384
            Y: =Gallery6_1.Y + Gallery6_1.Height + 10
      - lbl_SoDH_tre_2:
          Control: Label@2.5.1
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =RGBA(77, 77, 77, 1)
            Font: =Font.Arial
            PaddingBottom: =0
            PaddingLeft: =20
            PaddingRight: =30
            PaddingTop: =0
            Size: =20
            Text: |-
              =CountRows(Filter(List_VT,'Tr·∫°ng th√°i'='Tr·∫°ng th√°i (V·∫≠n t·∫£i)'.'ƒê√£ g·ª≠i'))&
              " ƒë∆°n ƒë√£ xu·∫•t kho"
            Visible: =If(Gallery6_1.Selected.Value = "V·∫≠n t·∫£i" And Visible_tiendo = false, true, false)
            Width: =Parent.Width/2
            X: =40
            Y: =Gallery6_1.Y + Gallery6_1.Height + 10
